<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>re初探 | 星北的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="—Valid Phone NumbersGiven a text file file.txt that contains list of phone numbers (one per line), write a one liner bash script to print all valid phone numbers.
You may assume that a valid phone num">
<meta property="og:type" content="article">
<meta property="og:title" content="re初探">
<meta property="og:url" content="http://yoursite.com/2016/05/08/re初探/index.html">
<meta property="og:site_name" content="星北的博客">
<meta property="og:description" content="—Valid Phone NumbersGiven a text file file.txt that contains list of phone numbers (one per line), write a one liner bash script to print all valid phone numbers.
You may assume that a valid phone num">
<meta property="og:updated_time" content="2016-05-08T13:07:26.202Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="re初探">
<meta name="twitter:description" content="—Valid Phone NumbersGiven a text file file.txt that contains list of phone numbers (one per line), write a one liner bash script to print all valid phone numbers.
You may assume that a valid phone num">
  
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="undefined" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Northstarlee</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Hell isn&#39;t other people. Hell is yourself.</p>
		

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Northstarlee</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img src="undefined" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Northstarlee</h1>
			</hgroup>
			
			<p class="header-subtitle">Hell isn&#39;t other people. Hell is yourself.</p>
			
			<nav class="header-menu">
				<ul>
				
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-re初探" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/08/re初探/" class="article-date">
  	<time datetime="2016-05-08T12:38:11.000Z" itemprop="datePublished">2016-05-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      re初探
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>—Valid Phone Numbers<br>Given a text file file.txt that contains list of phone numbers (one per line), write a one liner bash script to print all valid phone numbers.</p>
<p>You may assume that a valid phone number must appear in one of the following two formats: (xxx) xxx-xxxx or xxx-xxx-xxxx. (x means a digit)</p>
<p>You may also assume each line in the text file must not contain leading or trailing white spaces.</p>
<p>Bash代码：</p>
<p>grep -P ‘^(([[:digit:]]{3}) ){1}[[:digit:]]{3}-[[:digit:]]{4}$|^([[:digit:]]{3}-){2}[[:digit:]]{4}$’ file.txt<br>grep -P ‘^(([0-9]{3}) ){1}[0-9]{3}-[0-9]{4}$|^([0-9]{3}-){2}[0-9]{4}$’ file.txt<br>grep -P ‘^((\d{3}) ){1}[\d]{3}-[\d]{4}$|^([\d]{3}-){2}[\d]{4}$’ file.txt </p>
<p>-P的含义：-P, –perl-regexp<br>              Interpret PATTERN as a Perl regular expression.  This  is  highly  experimental  and<br>              grep -P may warn of unimplemented features.</p>
<p>grep -Eo ‘^(([0-9]{3}) ){1}[0-9]{3}-[0-9]{4}$|^([0-9]{3}-){2}[0-9]{4}$’ file.txt<br>grep -E ‘^(([[:digit:]]{3}) ){1}[[:digit:]]{3}-[[:digit:]]{4}$|^([[:digit:]]{3}-){2}[[:digit:]]{4}$’ file.txt</p>
<p>-E, –extended-regexp<br>              Interpret PATTERN as an extended  regular  expression  (ERE,  see  below).   (-E  is<br>              specified by POSIX.)</p>
<p>POSIX规范<br>常见的正则表达式记法，其实都源于Perl，实际上，正则表达式从Perl衍生出一个显赫的流派，叫做PCRE（Perl Compatible Regular Expression），『\d』、『\w』、『\s』之类的记法，就是这个流派的特征。但是在PCRE之外，正则表达式还有其它流派，比如下面要介绍的POSIX规范的正则表达式。<br>POSIX的全称是Portable Operating System Interface for uniX，它由一系列规范构成，定义了UNIX操作系统应当支持的功能，所以“POSIX规范的正则表达式”其实只是“关于正则表达式的POSIX规范”，它定义了BRE（Basic Regular Expression，基本型正则表达式）和ERE（Extended Regular Express，扩展型正则表达式）两大流派。在兼容POSIX的UNIX系统上，grep和egrep之类的工具都遵循POSIX规范，一些数据库系统中的正则表达式也符合POSIX规范。<br>BRE<br>在Linux/Unix常用工具中，grep、vi、sed都属于BRE这一派，它的语法看起来比较奇怪，元字符『(』、『)』、『{』、『}』必须转义之后才具有特殊含义，所以正则表达式『(a)b』只能匹配字符串 (a)b而不是字符串ab；正则表达式『a{1,2}』只能匹配字符串a{1,2}，正则表达式『a{1,2}』才能匹配字符串a或者aa。<br>之所以这么麻烦，是因为这些工具的诞生时间很早，正则表达式的许多功能却是逐步发展演化出来的，之前这些元字符可能并没有特殊的含义；为保证向后兼容，就只能使用转义。而且有些功能甚至根本就不支持，比如BRE就不支持『+』和『?』量词，也不支持多选结构『(…|…)』和反向引用『\1』、『\2』…。<br>不过今天，纯粹的BRE已经很少见了，毕竟大家已经认为正则表达式“理所应当”支持多选结构和反向引用等功能，没有确实太不方便。所以虽然vi属于BRE流派，但提供了这些功能。GNU也对BRE做了扩展，支持『+』、『?』、『|』，只是使用时必须写成『+』、『\?』、『|』，而且也支持『\1』、『\2』之类反向引用。这样，GNU的grep等工具虽然名义上属于BRE流，但更确切的名称是GNU BRE。<br>ERE<br>在Linux/Unix常用工具中，egrep、awk则属于ERE这一派，。虽然BRE名为“基本”而ERE名为“扩展”，但ERE并不要求兼容BRE的语法，而是自成一体。因此其中的元字符不用转义（在元字符之前添加反斜线会取消其特殊含义），所以『(ab|cd)』就可以匹配字符串ab或者cd，量词『+』、『?』、『{n,m}』可以直接使用。ERE并没有明确规定支持反向引用，但是不少工具都支持『\1』、『\2』之类的反向引用。<br>GNU出品的egrep等工具就属于ERE流（更准确的名字是GNU ERE），但因为GNU已经对BRE做了不少扩展，所谓的GNU ERE其实只是个说法而已，它有的功能GNU BRE都有了，只是元字符不需要转义而已。<br>下面的表格简要说明了几种POSIX流派的区别[1]（其实，现在的BRE和ERE在功能上并没有什么区别，主要的差异是在元字符的转义上）。<br>几种POSIX流派的说明<br>流派    说明    工具<br>BRE    (、)、{、}都必须转义使用，不支持+、?、|    grep、sed、vi（但vi支持这些多选结构和反向引用）<br>GNU BRE    (、)、{、}、+、?、|都必须转义使用    GNU grep、GNU sed<br>ERE    元字符不必转义，+、?、(、)、{、}、|可以直接使用，\1、\2的支持不确定    egrep、awk<br>GNU ERE    元字符不必转义，+、?、(、)、{、}、|可以直接使用，支持\1、\2    grep –E、GNU awk<br>为了方便查阅，下面再用一张表格列出基本的正则功能在常用工具中的表示法，其中的工具GNU的版本为准。<br>常用Linux/Unix工具中的表示法<br>PCRE记法    vi/vim    grep    awk    sed</p>
<hr>
<ul>
<li>+    +    +    +<br>?    \=    \?    ?    \?<br>{m,n}    {m,n}    {m,n}    {m,n}    {m,n}<br>\b <em>    \&lt; >    \&lt; >    \&lt; >    \y \&lt; ><br>(…|…)    (…|…)    (…|…)    (…|…)    (…|…)<br>(…)    (…)    (…)    (…)    (…)<br>\1 \2    \1 \2    \1 \2    不支持    \1 \2<br>注：PCRE中常用\b来表示“单词的起始或结束位置”，但Linux/Unix的工具中，通常用\&lt;来匹配“单词的起始位置”，用>来匹配“单词的结束位置”，sed中的\y可以同时匹配这两个位置。<br>POSIX字符组<br>在某些文档中，你还会发现类似『[:digit:]』、『[:lower:]』之类的表示法，它们看起来不难理解（digit就是“数字”，lower就是“小写”），但又很奇怪，这就是POSIX字符组。不仅在Linux/Unix的常见工具中，甚至一些变成语言中都出现了这些字符组，为避免困惑，这里有必要简要介绍它们。<br>在POSIX规范中，『[a-z]』、『[aeiou]』之类的记法仍然是合法的，其意义与PCRE中的字符组也没有区别，只是这类记法的准确名称是POSIX方括号表达式（bracket expression），它主要用在Unix/Linux系统中。POSIX方括号表示法与PCRE字符组的最主要差别在于：POSIX字符组中，反斜线\不是用来转义的。所以POSIX方括号表示法『[\d]』只能匹配\和d两个字符，而不是『[0-9]』对应的数字字符。<br>为了解决字符组中特殊意义字符的转义问题，POSIX方括号表示法规定，如果要在字符组中表达字符]（而不是作为字符组的结束标记），应当让它紧跟在字符组的开方括号之后，所以POSIX中，正则表达式『[]a]』能匹配的字符就是]和a；如果要在POSIX方括号表示法中表达字符-（而不是范围表示法），必须将它紧挨在闭方括号]之前，所以『[a-]』能匹配的字符就是a和-。<br>POSIX规范也定义了POSIX字符组，它近似等价于于PCRE的字符组简记法，用一个有直观意义的名字来表示某一组字符，比如digit表示“数字字符”，alpha表示“字母字符”。<br>不过，POSIX中还有一个值得注意的概念：locale（通常翻译为“语言环境”）。它是一组与语言和文化相关的设定，包括日期格式、货币币值、字符编码等等。POSIX字符组的意义会根据locale的变化而变化，下面的表格介绍了常见的POSIX字符组在ASCII语言环境与Unicode语言环境下的意义，供大家参考。<br>POSIX字符组<br>POSIX字符组    说明    ASCII语言环境    Unicode语言环境<br>[:alnum:]</em>    字母字符和数字字符    [a-zA-Z0-9]    [\p{L&amp;}\p{Nd}]<br>[:alpha:]    字母    [a-zA-Z]    \p{L&amp;}<br>[:ascii:]    ASCII字符    [\x00-\x7F]    \p{InBasicLatin}<br>[:blank:]    空格字符和制表符    [ \t]    [\p{Zs}\t]<br>[:cntrl:]    控制字符    [\x00-\x1F\x7F]    \p{Cc}<br>[:digit:]    数字字符    [0-9]    \p{Nd}<br>[:graph:]    空白字符之外的字符    [\x21-\x7E]    [^\p{Z}\p{C}]<br>[:lower:]    小写字母字符    [a-z]    \p{Ll}<br>[:print:]    类似[:graph:]，但包括空白字符    [\x20-\x7E]    \P{C}<br>[:punct:]    标点符号    [][!”#$%&amp;’()<em>+,./:;&lt;=&gt;?@\^_`{|}~-]    [\p{P}\p{S}]<br>[:space:]    空白字符    [ \t\r\n\v\f]    [\p{Z}\t\r\n\v\f]<br>[:upper:]    大写字母字符    [A-Z]    \p{Lu}<br>[:word:]</em>    字母字符    [A-Za-z0-9_]    [\p{L}\p{N}\p{Pc}]<br>[:xdigit:]    十六进制字符    [A-Fa-f0-9]    [A-Fa-f0-9]<br>注1：标记*的字符组简记法并不是POSIX规范中的，但使用很多，一般语言中都提供，文档中也会出现。<br>注2：对应的Unicode属性请参考本系列文章已经刊发过的关于Unicode的部分。<br>POSIX字符组的使用有所不同。主要区别在于，PCRE字符组简记法可以脱离方括号直接出现，而POSIX字符组必须出现在方括号内，所以同样是匹配数字字符，单独出现时，PCRE中可以直接写『\d』，而POSIX字符组就必须写成『[[:digit:]]』。<br>Linux/Unix下的工具中，一般都可以直接使用POSIX字符组，而PCRE的字符组简记法『\w』、『\d』等则大多不支持，所以如果你看到『[[:space:]]』而不是『\s』，一定不要感到奇怪。</li>
</ul>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/05/01/python类和继承的简单练习/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">python类和继承的简单练习</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>








</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Northstarlee
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: undefined,
		mathjax: undefined,
		animate: undefined,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: undefined
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






  </div>
</body>
</html>